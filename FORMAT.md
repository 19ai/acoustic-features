# Format

## Dataset folder structure

```
 - /dataset_folder --+-- /data/*.csv
                     |
                     +-- /dataset.yaml
                     |
                     +-- /class_labels.yaml
                     |
                     +-- /*.h5
```

Operation:
- Initial setup phase: You have to edit dataset.yaml manually
- Data acquisition phase: oscilloscope.py saves csv files in /data
- Training phase: Jupyter notebook generates class_labels.yaml and \*.h5
- Inference phase: add the h5 file in dataset.yaml as a model

## Dataset format

### Windows

A list of windows is automatically generated by using the following info:

```

         <------------------- 200 samples --------------------->
         +-----------------------------------------------------+
         |                                                     |
         |                                                     |
       ^ +-----------------+                                   |
Cutoff | |                 |                                   |
       V |                 |                                   |
         +-----------------------------------------------------+
         <---- length ----->
         - stride->
         --
```

### One record in a dataset

```

         <------------------- 200 samples --------------------->
         +----------------+----------------+----------------+--+
         |                |                |                |  | ^
         |                |                |                |  | |
       ^ |                |                |                |  | |
Cutoff | |                |                |                |  | | Filters(40 o 256)
(13)   V |                |                |                |  | V
         +----------------+----------------+----------------+--+
         <---- length ---->
             (64 or 96)
         - stride->
         (32, 64, 48 or 96)
```

### class_labels.yaml

Each index position in the list corresponds to each class identifier.

Example:
```
[blues_harp, classical_guitar, framenco_guitar, piano, silence, tin_whistle]
```

### dataset.yaml

Example:
```
feature: mfcc
files: 30
training_files: 20
length: 96
filters: 40
cutoff: 13
stride: 96
window_pos: 0
model: cnn_for_aed_restaurant_20181220081540.h5
```

"window_pos" is a position of window on a record:
- "0" means windows[0] MUST be applied to the record.
- "null" means all the windows in a window list SHOULD be applied to the record.
