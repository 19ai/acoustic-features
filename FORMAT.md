# Format

## Dataset folder structure

Dataset filder is prepared for each use cases. The folder has the following structure:

```
 - /dataset_folder --+-- /data/*.csv
                     |
                     +-- /dataset.yaml
                     |
                     +-- /class_labels.yaml
                     |
                     +-- /*.h5
```

### Operation

- Initial setup phase: You have to edit "dataset.yaml" manually
- Data acquisition phase: oscilloscope.py saves csv files in /data
- Training phase: Jupyter notebook generates "class_labels.yaml" and "\*.h5"
- Inference phase: add the h5 file in "dataset.yaml" as a model

## Dataset format

### Windows

A list of windows is automatically generated by using the following info:

```

         <--------------------- samples ----------------------->
         +-----------------------------------------------------+
         |                                                     |
         |                                                     |
       ^ +-----------------+                                   |
Cutoff | |                 |                                   |
       V |                 |                                   |
         +-----------------------------------------------------+
         <---- length ----->
         - stride->
         --
```

### One record in a dataset

```

         <------------------ samples (200) -------------------->
         +----------------+----------------+----------------+--+
         |                |                |                |  | ^
         |                |                |                |  | |
       ^ |                |                |                |  | |
Cutoff | |                |                |                |  | | Filters(64 or 40)
(13)   V |                |                |                |  | V
         +----------------+----------------+----------------+--+
         <---- length ---->
             (64 or 96)
         - stride->
         (32, 64, 48 or 96)
```

### class_labels.yaml

Each index position in the list corresponds to each class identifier.

Example:
```
[blues_harp, classical_guitar, framenco_guitar, piano, silence, tin_whistle]
```

### dataset.yaml

"dataset.yaml" is a config file with all the parameters for each use cases.

Example:
```
feature: mfcc
files: 30
training_files: 20
samples: 200
length: 96
filters: 40
cutoff: 13
stride: 96
model: cnn_for_aed_restaurant_20181220081540.h5
```
